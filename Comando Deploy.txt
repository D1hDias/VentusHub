# Atualizar aplicaÃ§Ã£o apÃ³s mudanÃ§as
cd /var/www/VentusHub
git pull
npm run build
sudo docker build -t ventushub:latest .
sudo docker service update --image ventushub:latest ventushub

# Monitorar logs
sudo docker service logs ventushub --follow

# Ver status
sudo docker service ls

git pull && export $(cat .env | xargs) && npm run build && pm2 restart ventushub


EXPLICAÃ‡Ã•ES:

Modo Desenvolvimento (NODE_ENV=development)

  Frontend (Vite)

  - âœ… Hot Reload - AlteraÃ§Ãµes aparecem instantaneamente
  - âœ… Source Maps - Debug fÃ¡cil com cÃ³digo original
  - âœ… CÃ³digo nÃ£o minificado - Mais fÃ¡cil de debugar
  - âœ… Mensagens de erro detalhadas - Stack traces completos
  - âœ… React DevTools funcionam perfeitamente
  - âš¡ CompilaÃ§Ã£o rÃ¡pida - Vite compila apenas o que mudou

  Backend (Express)

  - ğŸ”„ Vite Middleware - Serve arquivos React dinamicamente
  - ğŸ“ Logs detalhados - Mais informaÃ§Ãµes de debug
  - ğŸ› Error overlay - Erros aparecem na tela
  - ğŸ” Stack traces completos - Facilita debug

  ---
  Modo ProduÃ§Ã£o (NODE_ENV=production)

  Frontend (Build estÃ¡tico)

  - ğŸ“¦ CÃ³digo minificado - Arquivos menores (~1.9MB â†’ ~500KB)
  - âš¡ Otimizado - Tree-shaking remove cÃ³digo nÃ£o usado
  - ğŸ—œï¸ Assets otimizados - Imagens comprimidas, CSS combinado
  - ğŸš« Sem source maps - CÃ³digo ofuscado
  - ğŸ”’ VariÃ¡veis injetadas - VITE_* inseridas no build final

  Backend (Express)

  - ğŸ“ Serve arquivos estÃ¡ticos - DiretÃ³rio dist/public/
  - ğŸš€ Performance mÃ¡xima - Sem overhead do Vite
  - ğŸ“Š Logs mÃ­nimos - Apenas essencial
  - ğŸ›¡ï¸ SeguranÃ§a - Menos informaÃ§Ãµes expostas

  ---
  Fluxo de Arquivos

  Desenvolvimento:

  Browser â†’ Express â†’ Vite Middleware â†’ React (tempo real)

  ProduÃ§Ã£o:

  Browser â†’ Express â†’ Arquivos estÃ¡ticos prÃ©-buildados

  ---
  Quando Usar Cada Um

  Development (local):

  NODE_ENV=development
  npm run dev
  # Perfeito para codificar, testar, debugar

  Production (servidor):

  NODE_ENV=production
  npm run build
  npm start
  # Otimizado para velocidade e eficiÃªncia

  ---
  VariÃ¡veis de Ambiente

  Development:

  - Vite lÃª .env automaticamente
  - VITE_* disponÃ­veis imediatamente

  Production:

  - Precisa export $(cat .env | xargs) antes do build
  - VariÃ¡veis "injetadas" permanentemente no cÃ³digo


  Conceito BÃ¡sico:

  ğŸ”§ Desenvolvimento = Local (Construir/Testar)

  - Para vocÃª codificar no seu computador
  - Ver mudanÃ§as instantaneamente
  - Debugar erros facilmente
  - Testar funcionalidades

  ğŸš€ ProduÃ§Ã£o = Online (Deploy/Web)

  - Para usuÃ¡rios reais acessarem
  - Otimizado para velocidade
  - Seguro e estÃ¡vel
  - No seu servidor da web

  ---
  Fluxo PrÃ¡tico:

  1. ğŸ’» Local: NODE_ENV=development â†’ npm run dev
     (VocÃª codifica e testa)

  2. ğŸŒ Servidor: NODE_ENV=production â†’ npm run build â†’ npm start
     (UsuÃ¡rios acessam)

  ---
  Analogia: Ã‰ como uma oficina vs loja:
  - Desenvolvimento = Oficina (bagunÃ§ada, ferramentas Ã  vista, trabalho em progresso)
  - ProduÃ§Ã£o = Loja (limpa, organizada, produto final para clientes)

  Resumo do Fluxo:

  âœ… SEGURO - Pode fazer Ã  vontade:

  # No seu computador (desenvolvimento):
  - Modificar cÃ³digo
  - git add, commit, push, sync no Cursor
  - RepositÃ³rio fica atualizado
  â¡ï¸ Servidor online continua funcionando normalmente!

  âš ï¸ SÃ“ AFETA quando vocÃª executar no servidor:

  # No servidor SSH (sÃ³ quando quiser atualizar):
  git pull
  export $(cat .env | xargs) && npm run build
  pm2 restart ventushub

  ---
  Vantagens desse fluxo:

  âœ… RepositÃ³rio sempre atualizado - Backup seguro do seu trabalho
  âœ… Site online estÃ¡vel - UsuÃ¡rios nÃ£o sÃ£o afetados
  âœ… Deploy controlado - VocÃª escolhe quando atualizar
  âœ… Rollback fÃ¡cil - Pode voltar versÃ£o anterior se der problema

  ---
  Fluxo Recomendado:

  1. ğŸ”¨ Desenvolve local â†’ testa â†’ git push/sync
  2. ğŸ”¨ Desenvolve mais â†’ testa â†’ git push/sync
  3. ğŸ”¨ Desenvolve mais â†’ testa â†’ git push/sync
  4. âœ… Quando satisfeito â†’ Deploy no servidor